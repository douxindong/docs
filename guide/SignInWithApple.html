<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sign In With Apple 从登陆到服务器验证 | Limery</title>
    <meta name="description" content="欢迎!">
    <link rel="icon" href="/docs/favicon.png">
    
    <link rel="preload" href="/docs/assets/css/0.styles.d863bf22.css" as="style"><link rel="preload" href="/docs/assets/js/app.b6d384de.js" as="script"><link rel="preload" href="/docs/assets/js/2.ffdb66c4.js" as="script"><link rel="preload" href="/docs/assets/js/44.7dfb3295.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.dc6279fc.js"><link rel="prefetch" href="/docs/assets/js/11.ceee348c.js"><link rel="prefetch" href="/docs/assets/js/12.fab59449.js"><link rel="prefetch" href="/docs/assets/js/13.60f5107c.js"><link rel="prefetch" href="/docs/assets/js/14.7f7e348e.js"><link rel="prefetch" href="/docs/assets/js/15.8e28be33.js"><link rel="prefetch" href="/docs/assets/js/16.576a0302.js"><link rel="prefetch" href="/docs/assets/js/17.6e39df8a.js"><link rel="prefetch" href="/docs/assets/js/18.1943ae8b.js"><link rel="prefetch" href="/docs/assets/js/19.5508bf7a.js"><link rel="prefetch" href="/docs/assets/js/20.d1200c34.js"><link rel="prefetch" href="/docs/assets/js/21.5478a8ab.js"><link rel="prefetch" href="/docs/assets/js/22.dc8c5432.js"><link rel="prefetch" href="/docs/assets/js/23.1d674969.js"><link rel="prefetch" href="/docs/assets/js/24.470569d1.js"><link rel="prefetch" href="/docs/assets/js/25.629d8d29.js"><link rel="prefetch" href="/docs/assets/js/26.0204c872.js"><link rel="prefetch" href="/docs/assets/js/27.8933170a.js"><link rel="prefetch" href="/docs/assets/js/28.bf23bcd3.js"><link rel="prefetch" href="/docs/assets/js/29.2e25fc55.js"><link rel="prefetch" href="/docs/assets/js/3.eeb6970b.js"><link rel="prefetch" href="/docs/assets/js/30.589dd9fb.js"><link rel="prefetch" href="/docs/assets/js/31.85941da4.js"><link rel="prefetch" href="/docs/assets/js/32.94cbee4c.js"><link rel="prefetch" href="/docs/assets/js/33.171bbaaa.js"><link rel="prefetch" href="/docs/assets/js/34.020ddec5.js"><link rel="prefetch" href="/docs/assets/js/35.835bfd50.js"><link rel="prefetch" href="/docs/assets/js/36.5c93bdf4.js"><link rel="prefetch" href="/docs/assets/js/37.92cf4e33.js"><link rel="prefetch" href="/docs/assets/js/38.a3e95851.js"><link rel="prefetch" href="/docs/assets/js/39.76fb2cc2.js"><link rel="prefetch" href="/docs/assets/js/4.65986612.js"><link rel="prefetch" href="/docs/assets/js/40.420380bb.js"><link rel="prefetch" href="/docs/assets/js/41.713fee93.js"><link rel="prefetch" href="/docs/assets/js/42.54fc0492.js"><link rel="prefetch" href="/docs/assets/js/43.0e663909.js"><link rel="prefetch" href="/docs/assets/js/45.8cecd56f.js"><link rel="prefetch" href="/docs/assets/js/46.787d6e84.js"><link rel="prefetch" href="/docs/assets/js/5.148bb49f.js"><link rel="prefetch" href="/docs/assets/js/6.2c6a4780.js"><link rel="prefetch" href="/docs/assets/js/7.95ad2806.js"><link rel="prefetch" href="/docs/assets/js/8.2ce2d0ed.js"><link rel="prefetch" href="/docs/assets/js/9.096f8743.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.d863bf22.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Limery</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link">Api</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/docs/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/douxindong" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link router-link-active">Guide</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link">Api</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/docs/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/douxindong" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>apple login</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/guide/SignInWithApple.html" class="active sidebar-link">Sign In With Apple 从登陆到服务器验证</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/guide/SignInWithApple.html#客户端" class="sidebar-link">客户端</a></li><li class="sidebar-sub-header"><a href="/docs/guide/SignInWithApple.html#服务端" class="sidebar-link">服务端</a></li><li class="sidebar-sub-header"><a href="/docs/guide/SignInWithApple.html#_1-基于授权码authorizationcode的后端验证推荐" class="sidebar-link">1.基于授权码authorizationCode的后端验证推荐</a></li><li class="sidebar-sub-header"><a href="/docs/guide/SignInWithApple.html#_2-基于jwt的算法验证" class="sidebar-link">2.基于JWT的算法验证</a></li><li class="sidebar-sub-header"><a href="/docs/guide/SignInWithApple.html#_3-参考文档：" class="sidebar-link">3.参考文档：</a></li></ul></li><li><a href="/docs/guide/SignInWithAppleJavaImp.html" class="sidebar-link">实现服务端交互示例demo</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sign-in-with-apple-从登陆到服务器验证"><a href="#sign-in-with-apple-从登陆到服务器验证" class="header-anchor">#</a> Sign In With Apple 从登陆到服务器验证</h1> <h2 id="客户端"><a href="#客户端" class="header-anchor">#</a> 客户端</h2> <p>关于手机端登录的代码，...，登录成功后， 返回的参数：
<a data-fancybox="" title="images" href="http://i1.lifevccdn.com//Upload/AppCategoryBanner/3452b814c4c940aca35f413f97b59155.jpg"><img src="http://i1.lifevccdn.com//Upload/AppCategoryBanner/3452b814c4c940aca35f413f97b59155.jpg" alt="images"></a></p> <p>授权成功：</p> <div class="language-json5 extra-class"><pre class="language-json5"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;appleIDCredential&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&lt;ASAuthorizationAppleIDCredential: 0x280014360 { userIdentifier: 000277.009b1336f18a492493a410166afc2841.0404, authorizedScopes: (\n) }&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;authorizationCode&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;c209fbde0f81d4df983164722f1a260f7.0.nsxx.xhJeNEk-CURzSAJfP5lgfQ&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;email&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;douxindong@icloud.com&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;familyName&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\U7aa6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;givenName&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;\U5fc3\U4e1c&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;identityToken&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;eyJraWQiOiJlWGF1bm1MIiwiYWxnIjoiUlMyNTYifQ.eyJpc3MiOiJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tIiwiYXVkIjoiY29tLmxpZmV2Yy5pb3NBcHAiLCJleHAiOjE1OTczNzg0NjMsImlhdCI6MTU5NzM3Nzg2Mywic3ViIjoiMDAwMjc3LjAwOWIxMzM2ZjE4YTQ5MjQ5M2E0MTAxNjZhZmMyODQxLjA0MDQiLCJjX2hhc2giOiJFY0R3eXZzOUphOEVkWW9GWUNxaE9RIiwiZW1haWwiOiJkb3V4aW5kb25nQGljbG91ZC5jb20iLCJlbWFpbF92ZXJpZmllZCI6InRydWUiLCJhdXRoX3RpbWUiOjE1OTczNzc4NjMsIm5vbmNlX3N1cHBvcnRlZCI6dHJ1ZSwicmVhbF91c2VyX3N0YXR1cyI6Mn0.uLFfVB2-VHvGauQT6Pp2rjdSoL99l_pkpZXFAP_B__4Bb4oTM0gBlHIkieZAoECFphfcE-o_zX79VH6yIs9L7tMHORRjcw4uwRbuu99JZlxqXWQZXDhBinmfQWVFypJLsqz4dvhzHL8ywaXH9M0BdlmW5gghB8K8X9VTNHrK5ogRQH92Aj-y2KQJxakrFKdnuTm_NlDIcH--D83cZ9-0Lmh6xTRo-XE1FdyTXlzM_Cayncd1qi9xnTDfeGAfzoLxTNyHgjzlLOUbZiK5pNU19an-XRYBqjvEEdFc9MW1bVTZAck6xQD81yl2SS0YPlT51PFp2A_66fr4aw3j2MYs-A&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;realUserStatus&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">&quot;user&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;000277.009b1336f18a492493a410166afc2841.0404&quot;</span><span class="token punctuation">,</span><span class="token comment">//苹果用户唯一标识符，它在同一个开发者账号下的所有 App 下是一样的，我们可以用它来与后台的账号体系绑定起来（类似于微信的OpenID）。</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="服务端"><a href="#服务端" class="header-anchor">#</a> 服务端</h2> <p>Sign in with Apple REST API文档：<a href="https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_rest_api" target="_blank" rel="noopener noreferrer">sign_in_with_apple_rest_api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>苹果提供给用户服务端两种验证方式：</p> <h2 id="_1-基于授权码authorizationcode的后端验证推荐"><a href="#_1-基于授权码authorizationcode的后端验证推荐" class="header-anchor">#</a> 1.基于授权码authorizationCode的后端验证<code>推荐</code></h2> <p><a href="https://developer.apple.com/documentation/sign_in_with_apple/generate_and_validate_tokens" target="_blank" rel="noopener noreferrer">generate_and_validate_tokens<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a data-fancybox="" title="authorizationCod" href="http://i1.lifevccdn.com//Upload/AppCategoryBanner/fcf734739e334ad3af534ab98f0ce000.png"><img src="http://i1.lifevccdn.com//Upload/AppCategoryBanner/fcf734739e334ad3af534ab98f0ce000.png" alt="authorizationCod"></a></p> <div class="language- extra-class"><pre class="language-text"><code>过程：
1.APP端苹果登录,获取授权信息
2.服务端拿着code去Apple服务端获取授权验证，
POST https://appleid.apple.com/auth/token
</code></pre></div><table><thead><tr><th style="text-align:center;"><strong>名称</strong></th> <th style="text-align:center;"><strong>类型</strong></th> <th style="text-align:center;"><strong>必填</strong></th> <th style="text-align:center;"><strong>说明</strong></th></tr></thead> <tbody><tr><td style="text-align:center;">client_id</td> <td style="text-align:center;">String</td> <td style="text-align:center;">是</td> <td style="text-align:center;">com.lifevc.iosApp</td></tr> <tr><td style="text-align:center;">client_secret</td> <td style="text-align:center;">String</td> <td style="text-align:center;">是</td> <td style="text-align:center;">生成方法见下方</td></tr> <tr><td style="text-align:center;">code</td> <td style="text-align:center;">String</td> <td style="text-align:center;">是</td> <td style="text-align:center;">{authorizationCode}</td></tr> <tr><td style="text-align:center;">grant_type</td> <td style="text-align:center;">String</td> <td style="text-align:center;">是</td> <td style="text-align:center;">authorization_code(授权码验证时用)或refresh_token（刷新令牌验证）</td></tr> <tr><td style="text-align:center;">refresh_token</td> <td style="text-align:center;">String</td> <td style="text-align:center;">否</td> <td style="text-align:center;">刷新令牌验证请求需要此参数。</td></tr> <tr><td style="text-align:center;">redirect_uri</td> <td style="text-align:center;">String</td> <td style="text-align:center;">否</td> <td style="text-align:center;">web网站时需要</td></tr></tbody></table> <div class="language- extra-class"><pre class="language-text"><code>client_secret生成:相关参数
key_file = &quot;Path to the private key&quot;//见worktle附件，p8文件路径
team_id = &quot;7LU4PEC2RN&quot;
client_id = &quot;com.lifevc.iosApp&quot;
key_id = &quot;S9U923M4J7&quot;
</code></pre></div><p>备注：生成方法
JWT.encode(...)</p> <p>网上亲测通过示例：
建一个secret_gen.rb文件将以下代码copy进去</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">require</span> <span class="token string">&quot;jwt&quot;</span>

<span class="token comment"># key_file = &quot;Path to the private key&quot;</span>
<span class="token comment"># team_id = &quot;Your Team ID&quot;</span>
<span class="token comment"># client_id = &quot;Your App Bundle ID&quot;</span>
<span class="token comment"># key_id = &quot;The Key ID of the private key&quot;</span>
key_file <span class="token operator">=</span> <span class="token string">&quot;/Users/lifevc/Desktop/signinwithapple/AuthKey_S9U923M4J7.p8&quot;</span>
team_id <span class="token operator">=</span> <span class="token string">&quot;7LU4PEC2RN&quot;</span>
client_id <span class="token operator">=</span> <span class="token string">&quot;com.lifevc.iosApp&quot;</span>
key_id <span class="token operator">=</span> <span class="token string">&quot;S9U923M4J7&quot;</span>

validity_period <span class="token operator">=</span> <span class="token number">180</span> <span class="token comment"># In days. Max 180 (6 months) according to Apple docs.</span>

private_key <span class="token operator">=</span> <span class="token constant">OpenSSL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">PKey</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">EC</span><span class="token punctuation">.</span><span class="token keyword">new</span> <span class="token class-name">IO<span class="token punctuation">.</span>read</span> key_file

token <span class="token operator">=</span> <span class="token constant">JWT</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span>
	<span class="token punctuation">{</span>
		iss<span class="token punctuation">:</span> team_id<span class="token punctuation">,</span>
		iat<span class="token punctuation">:</span> <span class="token builtin">Time</span><span class="token punctuation">.</span>now<span class="token punctuation">.</span>to_i<span class="token punctuation">,</span>
		exp<span class="token punctuation">:</span> <span class="token builtin">Time</span><span class="token punctuation">.</span>now<span class="token punctuation">.</span>to_i <span class="token operator">+</span> <span class="token number">86400</span> <span class="token operator">*</span> validity_period<span class="token punctuation">,</span>
		aud<span class="token punctuation">:</span> <span class="token string">&quot;https://appleid.apple.com&quot;</span><span class="token punctuation">,</span>
		sub<span class="token punctuation">:</span> client_id
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	private_key<span class="token punctuation">,</span>
	<span class="token string">&quot;ES256&quot;</span><span class="token punctuation">,</span>
	header_fields<span class="token operator">=</span>
	<span class="token punctuation">{</span>
		kid<span class="token punctuation">:</span> key_id 
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span>
puts token
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>sudo ruby secret_gen.rb 
得到如下结果:
yJraWQiOiJTOVU5MjNNNEo3IiwiYWxnIjoiRVMyNTYifQ.eyJpc3MiOiI3TFU0UEVDMlJOIiwiaWF0IjoxNTk3NjM1MjEwLCJleHAiOjE2MTMxODcyMTAsImF1ZCI6Imh0dHBzOi8vYXBwbGVpZC5hcHBsZS5jb20iLCJzdWIiOiJjb20ubGlmZXZjLmlvc0FwcCJ9.VGLEYV00fTX-2g_e0of_f-rRxFnMSvWsBCvcvjf6nnRu0TDDENUpo3-rRzjyXltsqXHega4SViCU-wthk0P_5Q
</code></pre></div><p>然后将此结果填入client_secret参数发起POST请求：
<a href="https://developer.apple.com/documentation/sign_in_with_apple/generate_and_validate_tokens" target="_blank" rel="noopener noreferrer">以下参数文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;access_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ae920b9fba9314c138f9bca02ff165f95.0.msxx.u97aeotTYDpL9O98YzFR3w&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;token_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bearer&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;expires_in&quot;</span><span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span>
    <span class="token property">&quot;refresh_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ra7882ca192ca4bd3a221a60b44148f14.0.msxx.aS-IIqT_AFyQUeHLtXDTIQ&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eyJraWQiOiJlWGF1bm1MIiwiYWxnIjoiUlMyNTYifQ.eyJpc3MiOiJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tIiwiYXVkIjoiY29tLmxpZmV2Yy5pb3NBcHAiLCJleHAiOjE1OTc2MzU5NjksImlhdCI6MTU5NzYzNTM2OSwic3ViIjoiMDAwMjc3LjAwOWIxMzM2ZjE4YTQ5MjQ5M2E0MTAxNjZhZmMyODQxLjA0MDQiLCJhdF9oYXNoIjoiNDNKSElIbTJWM0NMV2I4RmpTWHF3dyIsImVtYWlsIjoiZG91eGluZG9uZ0BpY2xvdWQuY29tIiwiZW1haWxfdmVyaWZpZWQiOiJ0cnVlIiwiYXV0aF90aW1lIjoxNTk3NjM1MTk0LCJub25jZV9zdXBwb3J0ZWQiOnRydWV9.Wym3wOhaQwUhuSRWByjud9rD16YhMlxtyVcCutiQDzv549nZJqei5F-COuQZXOrrBliiFCGgNoXhaBQtoac-F3DXHm4yCohkA2oY--4Sxl7t8O5ETBQOZuz-ZX6YQ_eSLR0wrtJJbMrRqBlner-dapGV-28w2Rmw4kA9oSfra5NnJgsFtobOhXBu3THXOBmb5QP9tXeLiEY6k3wnY2cxnEjhVhLdZjKgL9emIaR6RFKmlSUo50kkRfTeuIaZ7gAJDno3L4lrfs0N0EbvceHmwOceF34CFWxDbMpbTkiabUvwQAkqI1ylSB0Ld1xfIxE9txH91bUIxMaXkgmjbTHoWA&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中 id_token 也是 JWT 数据，decode 出 payload 部分如下：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span> 
  <span class="token property">&quot;iss&quot;</span><span class="token operator">:</span><span class="token string">&quot;https://appleid.apple.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;aud&quot;</span><span class="token operator">:</span><span class="token string">&quot;com.lifevc.iosApp&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exp&quot;</span><span class="token operator">:</span><span class="token number">1597636054</span><span class="token punctuation">,</span>
  <span class="token property">&quot;iat&quot;</span><span class="token operator">:</span><span class="token number">1597635454</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sub&quot;</span><span class="token operator">:</span><span class="token string">&quot;000277.009b1336f18a492493a410166afc2841.0404&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;at_hash&quot;</span><span class="token operator">:</span><span class="token string">&quot;7JjFtNXGS_1BTL5BU7fZ4g&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;email&quot;</span><span class="token operator">:</span><span class="token string">&quot;douxindong@icloud.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;email_verified&quot;</span><span class="token operator">:</span><span class="token string">&quot;true&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中<code>aud</code>与app的bundleID一致，<code>sub</code> 部分即与手机端获得的 <code>user</code> 一致，服务器端通过对比 <code>sub</code> 字段信息是否与手机端上传的 <code>user</code> 信息一致来确定是否成功登录。
进行<code>lifevc</code>业务侧注册登录</p> <h2 id="_2-基于jwt的算法验证"><a href="#_2-基于jwt的算法验证" class="header-anchor">#</a> 2.基于JWT的算法验证</h2> <p><a href="https://developer.apple.com/documentation/sign_in_with_apple/fetch_apple_s_public_key_for_verifying_token_signature" target="_blank" rel="noopener noreferrer">fetch_apple_s_public_key_for_verifying_token_signature<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>时序图：<a data-fancybox="" title="时序图" href="https://img-blog.csdnimg.cn/20200528114828379.png"><img src="https://img-blog.csdnimg.cn/20200528114828379.png" alt="时序图"></a></p> <div class="language- extra-class"><pre class="language-text"><code>过程：
 1.需要逆向构造过程，decode出JWT的三个部分（主要是第一部分【包含确认使用哪个key去构造公钥】和第二部分【包含用户sub&quot;openID&quot;信息】）
 2.从appleid.apple.com/auth/keys中获取公钥，并将公钥转换为pem对JWT进行验证
 3.如identityToken通过验证，则可以根据其payload中的内容进行验证等操作
</code></pre></div><p>1.Apple公钥接口：<code>Public Key</code></p> <p><code>https://appleid.apple.com/auth/keys</code></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;keys&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;kty&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RSA&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;86D88Kf&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;use&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sig&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RS256&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;n&quot;</span><span class="token operator">:</span> <span class="token string">&quot;iGaLqP6y-SJCCBq5Hv6pGDbG_SQ11MNjH7rWHcCFYz4hGwHC4lcSurTlV8u3avoVNM8jXevG1Iu1SY11qInqUvjJur--hghr1b56OPJu6H1iKulSxGjEIyDP6c5BdE1uwprYyr4IO9th8fOwCPygjLFrh44XEGbDIFeImwvBAGOhmMB2AD1n1KviyNsH0bEB7phQtiLk-ILjv1bORSRl8AK677-1T8isGfHKXGZ_ZGtStDe7Lu0Ihp8zoUt59kx2o9uWpROkzF56ypresiIl4WprClRCjz8x6cPZXU2qNWhu71TQvUFwvIvbkE1oYaJMb0jcOTmBRZA2QuYw-zHLwQ&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AQAB&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;kty&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RSA&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eXaunmL&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;use&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sig&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RS256&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;n&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4dGQ7bQK8LgILOdLsYzfZjkEAoQeVC_aqyc8GC6RX7dq_KvRAQAWPvkam8VQv4GK5T4ogklEKEvj5ISBamdDNq1n52TpxQwI2EqxSk7I9fKPKhRt4F8-2yETlYvye-2s6NeWJim0KBtOVrk0gWvEDgd6WOqJl_yt5WBISvILNyVg1qAAM8JeX6dRPosahRVDjA52G2X-Tip84wqwyRpUlq2ybzcLh3zyhCitBOebiRWDQfG26EH9lTlJhll-p_Dg8vAXxJLIJ4SNLcqgFeZe4OfHLgdzMvxXZJnPp_VgmkcpUdRotazKZumj6dBPcXI_XID4Z4Z3OM1KrZPJNdUhxw&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;e&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AQAB&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>得到一个 keys 列表，也就是 JWK 列表。
这也就意味着客户端向服务器提交的 <code>identityToken</code> 可能是用 <code>keys</code> 里面的特定某个 <code>JWK</code> 来进行加密的。
接下来就需要我们确定当前的 <code>identityToken</code> 到底是使用哪个 <code>JWK</code> 来加密的，这样做可以避免批量生成证书，提升性能。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//对前端传来的JWT字符串identityToken的第一部分进行解码</span>
base64<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span><span class="token string">'eyJraWQiOiJlWGF1bm1MIiwiYWxnIjoiUlMyNTYifQ'</span><span class="token punctuation">)</span>
decode出JWT的header部分得到
<span class="token punctuation">{</span><span class="token string">&quot;kid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eXaunmL&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;alg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RS256&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>根据<code>kid</code>遍历找出对应的<code>n</code>、<code>e</code>,构造公钥</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * 从hex string生成公钥
 *
 * @param stringN
 * @param stringE
 * @return 构造好的公钥
 * @throws NoSuchAlgorithmException
 * @throws InvalidKeySpecException
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">PublicKey</span> <span class="token function">createPublicKey</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> stringN<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">String</span> stringE<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> <span class="token class-name">NoSuchAlgorithmException</span><span class="token punctuation">,</span> <span class="token class-name">InvalidKeySpecException</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// BigInteger N = new BigInteger(stringN, 16); // hex base</span>
        <span class="token comment">// BigInteger E = new BigInteger(stringE, 16); // hex base</span>

        <span class="token keyword">final</span> <span class="token class-name">BigInteger</span> modulus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">decodeBase64</span><span class="token punctuation">(</span>stringN<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">BigInteger</span> publicExponent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Base64</span><span class="token punctuation">.</span><span class="token function">decodeBase64</span><span class="token punctuation">(</span>stringE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">final</span> <span class="token class-name">RSAPublicKeySpec</span> spec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RSAPublicKeySpec</span><span class="token punctuation">(</span>modulus<span class="token punctuation">,</span> publicExponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">KeyFactory</span> kf <span class="token operator">=</span> <span class="token class-name">KeyFactory</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;RSA&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> kf<span class="token punctuation">.</span><span class="token function">generatePublic</span><span class="token punctuation">(</span>spec<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下来验证JWT的有效性</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">verify</span><span class="token punctuation">(</span><span class="token class-name">PublicKey</span> key<span class="token punctuation">,</span> <span class="token class-name">String</span> jwt<span class="token punctuation">,</span> <span class="token class-name">String</span> audience<span class="token punctuation">,</span> <span class="token class-name">String</span> subject<span class="token punctuation">)</span> <span class="token punctuation">{</span>                      
    <span class="token class-name">JwtParser</span> jwtParser <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>              
    jwtParser<span class="token punctuation">.</span><span class="token function">requireIssuer</span><span class="token punctuation">(</span><span class="token string">&quot;https://appleid.apple.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
    jwtParser<span class="token punctuation">.</span><span class="token function">requireAudience</span><span class="token punctuation">(</span>audience<span class="token punctuation">)</span><span class="token punctuation">;</span>
    jwtParser<span class="token punctuation">.</span><span class="token function">requireSubject</span><span class="token punctuation">(</span>subject<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
       <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">&gt;</span></span> claim <span class="token operator">=</span> jwtParser<span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>jwt<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span>claim <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> claim<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;auth_time&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
          <span class="token keyword">return</span> <span class="token class-name">GlobalCode</span><span class="token punctuation">.</span>SUCCESS<span class="token punctuation">;</span>  <span class="token comment">//验证通过          </span>
       <span class="token punctuation">}</span>           
       <span class="token keyword">return</span> <span class="token class-name">GlobalCode</span><span class="token punctuation">.</span>THIRD_AUTH_CODE_INVALID<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExpiredJwtException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
       log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;apple identityToken expired&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token class-name">GlobalCode</span><span class="token punctuation">.</span>THIRD_AUTH_CODE_INVALID<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;apple identityToken illegal&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span> <span class="token class-name">GlobalCode</span><span class="token punctuation">.</span>FAIL_ILLEGAL_REQ<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>验证通过。</p> <p>接下来对APP传来的JWT字符串identityToken的第二部分进行解码</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
  * 对APP传来的JWT字符串identityToken的第二部分进行解码
  * 主要获取其中的aud和sub，aud大概对应ios APP端的包名，sub大概对应当前用户的授权的openID
  * @param identityToken
  * @return  {&quot;iss&quot;:&quot;https://appleid.apple.com&quot;,&quot;aud&quot;:&quot;com.lifevc.iosApp&quot;,&quot;exp&quot;:1597636054,&quot;iat&quot;:1597635454,&quot;sub&quot;:&quot;000277.009b1336f18a492493a410166afc2841.0404&quot;,&quot;at_hash&quot;:&quot;7JjFtNXGS_1BTL5BU7fZ4g&quot;,&quot;email&quot;:&quot;douxindong@icloud.com&quot;,&quot;email_verified&quot;:&quot;true&quot;}
  */</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">JSONObject</span> <span class="token function">parserIdentityToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> identityToken<span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> identityToken<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Base64</span> base64 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Base64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">String</span> decode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span>base64<span class="token punctuation">.</span><span class="token function">decodeBase64</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">String</span> substring <span class="token operator">=</span> decode<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> decode<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>substring<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">return</span>  jsonObject<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>得到<code>sub</code>（sub大概对应当前用户的授权的openID） 进行<code>lifevc</code>业务侧注册登录</p> <h2 id="_3-参考文档："><a href="#_3-参考文档：" class="header-anchor">#</a> 3.参考文档：</h2> <p><a href="/docs/guide/SignInWithAppleJavaImp.html">本地接口实现：</a></p> <p><a href="https://www.yuque.com/zhanglong/bb0s5d/cxbh7n" target="_blank" rel="noopener noreferrer">Sign In With Apple 从登陆到服务器验证<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/wpf199402076118/article/details/99677412" target="_blank" rel="noopener noreferrer">Sign in with Apple（苹果授权登陆）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://juejin.im/post/6844903914051993607" target="_blank" rel="noopener noreferrer">iOS 13 苹果账号登陆与后台验证相<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://developer.apple.com/documentation/sign_in_with_apple" target="_blank" rel="noopener noreferrer">Apple官方文档sign_in_with_apple<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/guide/SignInWithAppleJavaImp.html">实现服务端交互示例demo</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.b6d384de.js" defer></script><script src="/docs/assets/js/2.ffdb66c4.js" defer></script><script src="/docs/assets/js/44.7dfb3295.js" defer></script>
  </body>
</html>
