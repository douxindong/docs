<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JPush SDK魅族通道集成指南 | Limery</title>
    <meta name="description" content="欢迎!">
    <link rel="icon" href="/docs/favicon.png">
    
    <link rel="preload" href="/docs/assets/css/0.styles.d863bf22.css" as="style"><link rel="preload" href="/docs/assets/js/app.b6d384de.js" as="script"><link rel="preload" href="/docs/assets/js/2.ffdb66c4.js" as="script"><link rel="preload" href="/docs/assets/js/30.589dd9fb.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.dc6279fc.js"><link rel="prefetch" href="/docs/assets/js/11.ceee348c.js"><link rel="prefetch" href="/docs/assets/js/12.fab59449.js"><link rel="prefetch" href="/docs/assets/js/13.60f5107c.js"><link rel="prefetch" href="/docs/assets/js/14.7f7e348e.js"><link rel="prefetch" href="/docs/assets/js/15.8e28be33.js"><link rel="prefetch" href="/docs/assets/js/16.576a0302.js"><link rel="prefetch" href="/docs/assets/js/17.6e39df8a.js"><link rel="prefetch" href="/docs/assets/js/18.1943ae8b.js"><link rel="prefetch" href="/docs/assets/js/19.5508bf7a.js"><link rel="prefetch" href="/docs/assets/js/20.d1200c34.js"><link rel="prefetch" href="/docs/assets/js/21.5478a8ab.js"><link rel="prefetch" href="/docs/assets/js/22.dc8c5432.js"><link rel="prefetch" href="/docs/assets/js/23.1d674969.js"><link rel="prefetch" href="/docs/assets/js/24.470569d1.js"><link rel="prefetch" href="/docs/assets/js/25.629d8d29.js"><link rel="prefetch" href="/docs/assets/js/26.0204c872.js"><link rel="prefetch" href="/docs/assets/js/27.8933170a.js"><link rel="prefetch" href="/docs/assets/js/28.bf23bcd3.js"><link rel="prefetch" href="/docs/assets/js/29.2e25fc55.js"><link rel="prefetch" href="/docs/assets/js/3.eeb6970b.js"><link rel="prefetch" href="/docs/assets/js/31.85941da4.js"><link rel="prefetch" href="/docs/assets/js/32.94cbee4c.js"><link rel="prefetch" href="/docs/assets/js/33.171bbaaa.js"><link rel="prefetch" href="/docs/assets/js/34.020ddec5.js"><link rel="prefetch" href="/docs/assets/js/35.835bfd50.js"><link rel="prefetch" href="/docs/assets/js/36.5c93bdf4.js"><link rel="prefetch" href="/docs/assets/js/37.92cf4e33.js"><link rel="prefetch" href="/docs/assets/js/38.a3e95851.js"><link rel="prefetch" href="/docs/assets/js/39.76fb2cc2.js"><link rel="prefetch" href="/docs/assets/js/4.65986612.js"><link rel="prefetch" href="/docs/assets/js/40.420380bb.js"><link rel="prefetch" href="/docs/assets/js/41.713fee93.js"><link rel="prefetch" href="/docs/assets/js/42.54fc0492.js"><link rel="prefetch" href="/docs/assets/js/43.0e663909.js"><link rel="prefetch" href="/docs/assets/js/44.7dfb3295.js"><link rel="prefetch" href="/docs/assets/js/45.8cecd56f.js"><link rel="prefetch" href="/docs/assets/js/46.787d6e84.js"><link rel="prefetch" href="/docs/assets/js/5.148bb49f.js"><link rel="prefetch" href="/docs/assets/js/6.2c6a4780.js"><link rel="prefetch" href="/docs/assets/js/7.95ad2806.js"><link rel="prefetch" href="/docs/assets/js/8.2ce2d0ed.js"><link rel="prefetch" href="/docs/assets/js/9.096f8743.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.d863bf22.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Limery</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link router-link-active">Api</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/docs/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/douxindong" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link router-link-active">Api</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/docs/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/douxindong" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前言</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>月度超级粉丝榜</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/FansRank/" class="sidebar-link">接口文档</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>试用官V3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/tuijianguan-v3/tuijianguan-v3.html" class="sidebar-link">app端</a></li><li><a href="/docs/api/tuijianguan-v3/tuijianguan-v3-wx.html" class="sidebar-link">微信端</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>试用官</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/shiyongguan/shiyongguan.html" class="sidebar-link">App端接口领取页面信息</a></li><li><a href="/docs/api/shiyongguan/shiyongguan-wx.html" class="sidebar-link">微信端接口领取页面信息</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Android极光VIP接入SDK文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/third-push/" class="sidebar-link">通道集成指南</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>趣视频</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/AppDocument/Video.html" class="sidebar-link">阿里短视频demo接口</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>LifeVC 短视频</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/AppDocument/appconfig.html" class="sidebar-link">LifeVC app配置接口</a></li><li><a href="/docs/api/AppDocument/videologin.html" class="sidebar-link">LifeVC 短视频接口</a></li><li><a href="/docs/api/AppDocument/videostatistical.html" class="sidebar-link">记录日志统计接口</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>H5活动接口</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/AppDocument/AppScreenAd.html" class="sidebar-link">获取App启动广告接口</a></li><li><a href="/docs/api/DivideOneMillion/UserInfo.html" class="sidebar-link">瓜分红包-用户信息接口</a></li><li><a href="/docs/api/DivideOneMillion/Receive.html" class="sidebar-link">瓜分红包-提现接口</a></li><li><a href="/docs/api/GreenCart/GreenCardAPI.html" class="sidebar-link">小绿卡送福接口-主页</a></li><li><a href="/docs/api/GreenCart/ConfigGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-制卡页</a></li><li><a href="/docs/api/GreenCart/CreatetGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-提交卡</a></li><li><a href="/docs/api/GreenCart/ShareGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-分享页</a></li><li><a href="/docs/api/GreenCart/ReceiveGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-领取</a></li><li><a href="/docs/api/GreenCart/MyListGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-我的列表</a></li><li><a href="/docs/api/Report.html" class="sidebar-link">活动交互统计接入说明</a></li><li><a href="/docs/api/huiyuanquanyi.html" class="sidebar-link">权益领券接口</a></li><li><a href="/docs/api/Recived.html" class="sidebar-link">权益领券接口2</a></li><li><a href="/docs/api/vipactInfo.html" class="sidebar-link">VIP会员回馈-活动</a></li><li><a href="/docs/api/vipactjoin.html" class="sidebar-link">VIP会员回馈-参与</a></li><li><a href="/docs/api/vipfriendinfo.html" class="sidebar-link">VIP会员回馈-好友验证</a></li><li><a href="/docs/api/vipfriendzhu.html" class="sidebar-link">VIP会员回馈-好友助力</a></li><li><a href="/docs/api/viprecivefudai.html" class="sidebar-link">VIP会员回馈-领取福袋</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jpush-sdk魅族通道集成指南"><a href="#jpush-sdk魅族通道集成指南" class="header-anchor">#</a> JPush SDK魅族通道集成指南</h1> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>在国内 Android 生态中，推送通道都是由终端与云端之间的长链接来维持，严重依赖于应用进程的存活状态。如今一些手机厂家会在自家 rom 中做系统级别的推送通道，再由系统分发给各个 app，以此提高在自家 rom 上的推送送达率。</p> <p>JPush SDK 为了尽可能提高开发者在各类 rom 上的推送送达率，对使用 魅族 的设备推送，自动切换到魅族通道。同时，为了保证 SDK 的易用性，原本 JPush 的所有接口调用逻辑都不用修改,JPush 会对自身支持的功能做兼容.只需在manifest中配置上魅族 SDK 必须的配置组件即可。</p> <h2 id="功能描述"><a href="#功能描述" class="header-anchor">#</a> 功能描述</h2> <ul><li><p>JPush 初始化的时候可选择是否初始化魅族通道。</p></li> <li><p>在 魅族 设备上 JPush 通道与 魅族 通道共存.</p></li> <li><p>魅族通道初始化后支持 tag/alias 这些 JPush 原有的功能,其它的 JPush 未支持的功能目前暂时还不可用 .</p></li></ul> <p><em><strong>注1：</strong></em> 在flyme5.1.11.1及以上才使用 mzpush,因为之前的版本上 mzpush 的通道并非系统通道。</p> <h2 id="手动集成步骤"><a href="#手动集成步骤" class="header-anchor">#</a> 手动集成步骤</h2> <p>主要步骤为:</p> <ul><li><p><a href="#4.1">4.1. 增加魅族插件包及魅族推送包</a></p></li> <li><p><a href="#4.2">4.2. 修改 minSdkVersion 的值</a></p></li> <li><p><a href="#4.3">4.3. 配置魅族推送sdk所需要的权限</a></p></li> <li><p><a href="#4.4">4.4. 配置JPush接受魅族sdk的消息接受类</a></p></li> <li><p><a href="#4.5">4.5. 将MEIZUAPPKEY与MEIZUAPPID替换为在魅族后台注册对应该应用 的AppKey/AppID </a></p></li></ul> <p>####</p><h3 id="4.1"> 4.1. 增加魅族插件包及魅族推送包 </h3><p></p> <ul><li>将third-push目录下找到meizu目录，从libs中拷贝其中的jar包至工程的libs目录下。</li> <li>将third-push目录下找到res目录，从res中所有的资源文件拷贝至工程的res目录下。</li> <li>jar包说明：</li> <li>jpush-android-plugin-meizu-v3.x.x.jar:插件包</li> <li>meizu-push-x.x.x.jar:魅族推送包</li></ul> <p><em><strong>注1：</strong></em> 极光集成魅族通道在 JPush Android SDK 3.0.6 添加。</p> <p><em><strong>注2：</strong></em> JPush Android SDK 3.2.0添加了魅族推送包，对应的魅族sdk版本为：meizu-push-3.8.1.jar</p> <p><em><strong>注3：</strong></em> JPush Android SDK 3.6.0更新了魅族推送包，对应的魅族sdk版本为：meizu-push-3.9.0.jar</p> <h4 id="_4-2-修改-minsdkversion-的值"><a href="#_4-2-修改-minsdkversion-的值" class="header-anchor">#</a> <h3 id="4.2"> 4.2. 修改 minSdkVersion 的值</h3></h4> <p><em><strong>注:</strong></em> 魅族推送 会强制将 minSdkVersion 修改为 11。如果当前 app 使用的 minSdkVersion 的值小于 11,则需要使用 tools 避免被强制覆盖。</p> <div class="language- extra-class"><pre class="language-text"><code>	&lt;manifest
		xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
		xmlns:tools=&quot;http://schemas.android.com/tools&quot;
	... &gt;

	&lt;uses-sdk
		android:minSdkVersion=&quot;9&quot;
		android:targetSdkVersion=&quot;21&quot;
		tools:overrideLibrary=&quot;cn.jpush.android.thirdpush.meizu&quot; /&gt;

</code></pre></div><h4 id="_4-3-配置魅族推送sdk所需要的权限"><a href="#_4-3-配置魅族推送sdk所需要的权限" class="header-anchor">#</a> <h3 id="4.3"> 4.3. 配置魅族推送sdk所需要的权限</h3></h4> <div class="language- extra-class"><pre class="language-text"><code>    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;
	&lt;uses-permission android:name=&quot;com.meizu.c2dm.permission.RECEIVE&quot; /&gt;
	&lt;permission
		android:name=&quot;您应用的包名.permission.C2D_MESSAGE&quot;
		android:protectionLevel=&quot;signature&quot;&gt;&lt;/permission&gt;
	&lt;uses-permission android:name=&quot;您应用的包名.permission.C2D_MESSAGE&quot; /&gt;

</code></pre></div><h4 id="_4-4-配置魅族推送sdk所需要的必要组件"><a href="#_4-4-配置魅族推送sdk所需要的必要组件" class="header-anchor">#</a> <h3 id="4.4"> 4.4. 配置魅族推送sdk所需要的必要组件</h3></h4> <div class="language- extra-class"><pre class="language-text"><code>        &lt;service
            android:name=&quot;com.meizu.cloud.pushsdk.NotificationService&quot;
            android:exported=&quot;true&quot; /&gt;

        &lt;receiver
            android:name=&quot;com.meizu.cloud.pushsdk.SystemReceiver&quot;
            android:exported=&quot;false&quot; &gt;
            &lt;intent-filter&gt;
                &lt;action android:name=&quot;com.meizu.cloud.pushservice.action.PUSH_SERVICE_START&quot; /&gt;

                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
            &lt;/intent-filter&gt;
        &lt;/receiver&gt;


</code></pre></div><h4 id="_4-5-配置jpush接受魅族sdk的消息接受类"><a href="#_4-5-配置jpush接受魅族sdk的消息接受类" class="header-anchor">#</a> <h3 id="4.5"> 4.5. 配置JPush接受魅族sdk的消息接受类</h3></h4> <div class="language- extra-class"><pre class="language-text"><code>	&lt;receiver android:name=&quot;cn.jpush.android.service.PluginMeizuPlatformsReceiver&quot;&gt;
		&lt;intent-filter&gt;
			&lt;!-- 接收 push 消息 --&gt;
			&lt;action android:name=&quot;com.meizu.flyme.push.intent.MESSAGE&quot; /&gt;
			&lt;!-- 接收 register 消息 --&gt;
			&lt;action android:name=&quot;com.meizu.flyme.push.intent.REGISTER.FEEDBACK&quot; /&gt;
			&lt;!-- 接收 unregister 消息--&gt;
			&lt;action android:name=&quot;com.meizu.flyme.push.intent.UNREGISTER.FEEDBACK&quot; /&gt;
			&lt;!-- 兼容低版本 Flyme3 推送服务配置 --&gt;
			&lt;action android:name=&quot;com.meizu.c2dm.intent.REGISTRATION&quot; /&gt;
			&lt;action android:name=&quot;com.meizu.c2dm.intent.RECEIVE&quot; /&gt;

			&lt;category android:name=&quot;您应用的包名&quot;&gt;&lt;/category&gt;
		&lt;/intent-filter&gt;
 	&lt;/receiver&gt;

</code></pre></div><p><em><strong>注</strong></em> 对于同一个应用集成了多个推送SDK，且其他SDK也使用了魅族通道的用户：
可以将这个极光内置的Receiver，换成自己定义的Receiver。
这个Receiver必须继承魅族的com.meizu.cloud.pushsdk.MzPushMessageReceiver
且在每个回调方法，都回调给极光的PluginMeizuPlatformsReceiver。类似于这样：</p> <div class="language- extra-class"><pre class="language-text"><code>public class MyMZPushReceiver extends MzPushMessageReceiver {

    final PluginMeizuPlatformsReceiver receiver = new PluginMeizuPlatformsReceiver();

    @Override
    public void onReceive(Context context, Intent intent) {
        receiver.onReceive(context, intent);
    }

    @Override
    public void onRegister(Context context, String s) {
        receiver.onRegister(context, s);
    }

    @Override
    public void onMessage(Context context, String s) {
        receiver.onMessage(context, s);
    }

    @Override
    public void onNotificationArrived(Context context, MzPushMessage mzPushMessage) {
        receiver.onNotificationArrived(context, mzPushMessage);
    }

    @Override
    public void onNotificationClicked(Context context, MzPushMessage mzPushMessage) {
        receiver.onNotificationClicked(context, mzPushMessage);
    }


    @Override
    public void onUnRegister(Context context, boolean b) {
        receiver.onUnRegister(context, b);
    }

    @Override
    public void onPushStatus(Context context, PushSwitchStatus pushSwitchStatus) {
        receiver.onPushStatus(context, pushSwitchStatus);
    }

    @Override
    public void onRegisterStatus(Context context, RegisterStatus registerStatus) {
        receiver.onRegisterStatus(context, registerStatus);
    }

    @Override
    public void onUnRegisterStatus(Context context, UnRegisterStatus unRegisterStatus) {
        receiver.onUnRegisterStatus(context, unRegisterStatus);
    }

    @Override
    public void onSubTagsStatus(Context context, SubTagsStatus subTagsStatus) {
        receiver.onSubTagsStatus(context, subTagsStatus);
    }

    @Override
    public void onSubAliasStatus(Context context, SubAliasStatus subAliasStatus) {
        receiver.onSubAliasStatus(context, subAliasStatus);
    }

    @Override
    public void onUpdateNotificationBuilder(PushNotificationBuilder pushNotificationBuilder) {
        receiver.onUpdateNotificationBuilder(pushNotificationBuilder);
    }
}

</code></pre></div><h4 id="_4-6-将meizuappkey与meizuappid替换为在魅族后台注册对应该应用-的appkey-appid"><a href="#_4-6-将meizuappkey与meizuappid替换为在魅族后台注册对应该应用-的appkey-appid" class="header-anchor">#</a> <h3 id="4.6"> 4.6. 将MEIZUAPPKEY与MEIZUAPPID替换为在魅族后台注册对应该应用 的AppKey/AppID </h3></h4> <p>将应用对应的魅族的 appkey 和 appid 加上前缀“MZ-”,填加在 meta-data 标签中</p> <div class="language- extra-class"><pre class="language-text"><code>	&lt;meta-data
		android:name=&quot;MEIZU_APPKEY&quot;
		android:value=&quot;MZ-您的应用对应的魅族的APPKEY&quot; /&gt;
	&lt;meta-data
		android:name=&quot;MEIZU_APPID&quot;
		android:value=&quot;MZ-您的应用对应的魅族的APPID&quot; /&gt;

</code></pre></div><h2 id="使用-jcenter-自动化集成步骤"><a href="#使用-jcenter-自动化集成步骤" class="header-anchor">#</a> 使用 JCenter 自动化集成步骤</h2> <ul><li>确认android studio的 Project 根目录的主 gradle 中配置了jcenter支持。(新建project默认配置就支持)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>	buildscript {
		repositories {
		jcenter()
		}
		......
	}


	allprojets {
		repositories {
		jcenter()
		}
	}

</code></pre></div><ul><li>在应用 module 的 gradle 中 dependencies 节点添加如下代码:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>	dependencies {
		compile 'cn.jiguang.sdk.plugin:meizu:3.x.x'
	}

</code></pre></div><ul><li>在应用 module 的 gradle 中 defaultConfig 节点添加如下代码:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>	manifestPlaceholders = [
   		// 设置manifest.xml中的变量
   		MEIZU_APPKEY : &quot;MZ-0956b96085d54c6087b85c7994b02ddf&quot;, // 魅族平台注册的appkey
   		MEIZU_APPID : &quot;MZ-110443&quot;, // 魅族平台注册的appid
   ]

</code></pre></div><h2 id="配置魅族通知栏小图标"><a href="#配置魅族通知栏小图标" class="header-anchor">#</a> 配置魅族通知栏小图标</h2> <p>通过 MzPush SDK 接收的通知，可设置其通知栏 icon，方法如下：</p> <p>在应用的工程目录 res/drawable-xxxx/ 几个文件夹中添加对应不同分辨率的通知栏 icon 图标，文件名为 mz_push_notification_small_icon。如果文件名错误，将无法正确显示该应用的状态栏图标。</p> <p>魅族手机状态栏 icon 规范请参考 <a href="https://github.com/MEIZUPUSH/PushDemo/tree/master/PushdemoInternal/src/main/res" target="_blank" rel="noopener noreferrer">魅族 PushSDK Demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 中的图片文件。</p> <p>**注：**如果没有放入符合规范的 icon 文件，会默认使用应用图标作为通知 icon。而应用图标不符合魅族的通知栏 icon 设计规范的话，则会导致通知栏图标无法正确显示。</p> <h2 id="通知内容长度兼容"><a href="#通知内容长度兼容" class="header-anchor">#</a> 通知内容长度兼容</h2> <h3 id="功能说明"><a href="#功能说明" class="header-anchor">#</a> 功能说明</h3> <p>由于魅族官方的通知内容长度限制为100个字符以内（中英文都算一个），当通知内容（极光的“alert”字段的值）长度超过100时，魅族通道会推送失败。此时调用极光api推送通知时，请在payload 中的 &quot;notification&quot; 的 &quot;android&quot; 节点的&quot;extras&quot;节点添加以下字段：</p> <h3 id="使用方式"><a href="#使用方式" class="header-anchor">#</a> 使用方式</h3> <h4 id="push-api-推送说明"><a href="#push-api-推送说明" class="header-anchor">#</a> Push API 推送说明</h4> <div align="center" class="table-d"><table border="1" width="100%"><tr bgcolor="#D3D3D3"><th>关键字</th> <th>类型</th> <th>示例</th> <th>说明</th></tr> <tr><td>mzpns_content_forshort</td> <td>string</td> <td>&quot;short content&quot;</td> <td>通知内容（极光的“alert”字段）长度超过100个字符时，可在此字段的值传入不超过100字符的通知内容。</td></tr></table></div> <p><em><strong>请求json示例：</strong></em></p> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;platform&quot;: [
        &quot;android&quot;
    ],
    &quot;audience&quot;: &quot;all&quot;,
    &quot;notification&quot;: {
        &quot;android&quot;: {
            &quot;alert&quot;: &quot;在国内 Android 生态中，推送通道都是由终端与云端之间的长链接来维持，严重依赖于应用进程的存活状态。如今一些手机厂家会在自家 rom 中做系统级别的推送通道，再由系统分发给各个 app，以此提高在自家 rom 上的推送送达率。JPush SDK 为了尽可能提高开发者在各类 rom 上的推送送达率，对使用 ColorOS 的设备推送，自动切换到魅族通道。同时，为了保证 SDK 的易用性，原本 JPush 的所有接口调用逻辑都不用修改,JPush 会对自身支持的功能做兼容.只需在manifest中配置上 魅族 SDK 必须的配置组件即可.&quot;,
            &quot;title&quot;: &quot;概述&quot;,
            &quot;extras&quot;: {
                &quot;mzpns_content_forshort&quot;: &quot;在国内 Android 生态中，推送通道都是由终端与云端之间的长链接来维持，严重依赖于应用进程的存活状态。&quot;
            }
        }

    },
    &quot;message&quot;: {
        &quot;msg_content&quot;: &quot;自定义消息内容003&quot;
    }
}

</code></pre></div><p>##集成错误码</p> <table><thead><tr><th>名称</th> <th>Code</th> <th>Commen</th></tr></thead> <tbody><tr><td>UNKNOWN_ERROR</td> <td>-1</td> <td>未知错误</td></tr> <tr><td>SUCCESS</td> <td>200</td> <td>成功</td></tr> <tr><td>SYSTEM_ERROR</td> <td>1001</td> <td>系统错误</td></tr> <tr><td>SYSTEM_BUSY</td> <td>1003</td> <td>服务器忙</td></tr> <tr><td>PARAMETER_ERROR</td> <td>1005</td> <td>参数错误，请参考API文档</td></tr> <tr><td>INVALID_SIGN</td> <td>1006</td> <td>签名认证失败</td></tr> <tr><td>INVALID_APPLICATION_ID</td> <td>110000</td> <td>appId不合法</td></tr> <tr><td>INVALID_APPLICATION_KEY</td> <td>110001</td> <td>appKey不合法</td></tr> <tr><td>UNSUBSCRIBE_PUSHID</td> <td>110002</td> <td>pushId未注册</td></tr> <tr><td>INVALID_PUSHID</td> <td>110003</td> <td>pushId非法</td></tr> <tr><td>PARAM_BLANK</td> <td>110004</td> <td>参数不能为空</td></tr> <tr><td>APP_IN_BLACK_LIST</td> <td>110009</td> <td>应用被加入黑名单</td></tr> <tr><td>APP_REQUEST_EXCEED_LIMIT</td> <td>110010</td> <td>应用请求频率过快</td></tr> <tr><td>APP_PUSH_TIME_EXCEED_LIMIT</td> <td>110051</td> <td>超过该应用的次数限制</td></tr> <tr><td>APP_REQUEST_PUSH_LIMIT</td> <td>110019</td> <td>超过该应用每天推送次数限制</td></tr> <tr><td>INVALID_APPLICATION_PACKAGENAME</td> <td>110031</td> <td>packageName不合法</td></tr> <tr><td>INVALID_TASK_ID</td> <td>110032</td> <td>非法的taskId</td></tr> <tr><td>INVALID_APPLICATION_SECRET</td> <td>110033</td> <td>非法的appSecret</td></tr></tbody></table> <h2 id="meizupush-sdk的编译混淆问题"><a href="#meizupush-sdk的编译混淆问题" class="header-anchor">#</a> MeizuPush SDK的编译混淆问题</h2> <p>如果使用了 proguard，需要在配置文件中加入,可以防止一个误报的 warning 导致无法成功编译，</p> <pre><code>-dontwarn com.meizu.cloud.**
-keep class com.meizu.cloud.** { *; }</code></pre></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.b6d384de.js" defer></script><script src="/docs/assets/js/2.ffdb66c4.js" defer></script><script src="/docs/assets/js/30.589dd9fb.js" defer></script>
  </body>
</html>
