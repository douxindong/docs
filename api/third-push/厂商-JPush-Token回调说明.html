<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JPush SDK 厂商通道Token回调说明 | Limery</title>
    <meta name="description" content="欢迎!">
    <link rel="icon" href="/docs/favicon.png">
    
    <link rel="preload" href="/docs/assets/css/0.styles.d863bf22.css" as="style"><link rel="preload" href="/docs/assets/js/app.b6d384de.js" as="script"><link rel="preload" href="/docs/assets/js/2.ffdb66c4.js" as="script"><link rel="preload" href="/docs/assets/js/34.020ddec5.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.dc6279fc.js"><link rel="prefetch" href="/docs/assets/js/11.ceee348c.js"><link rel="prefetch" href="/docs/assets/js/12.fab59449.js"><link rel="prefetch" href="/docs/assets/js/13.60f5107c.js"><link rel="prefetch" href="/docs/assets/js/14.7f7e348e.js"><link rel="prefetch" href="/docs/assets/js/15.8e28be33.js"><link rel="prefetch" href="/docs/assets/js/16.576a0302.js"><link rel="prefetch" href="/docs/assets/js/17.6e39df8a.js"><link rel="prefetch" href="/docs/assets/js/18.1943ae8b.js"><link rel="prefetch" href="/docs/assets/js/19.5508bf7a.js"><link rel="prefetch" href="/docs/assets/js/20.d1200c34.js"><link rel="prefetch" href="/docs/assets/js/21.5478a8ab.js"><link rel="prefetch" href="/docs/assets/js/22.dc8c5432.js"><link rel="prefetch" href="/docs/assets/js/23.1d674969.js"><link rel="prefetch" href="/docs/assets/js/24.470569d1.js"><link rel="prefetch" href="/docs/assets/js/25.629d8d29.js"><link rel="prefetch" href="/docs/assets/js/26.0204c872.js"><link rel="prefetch" href="/docs/assets/js/27.8933170a.js"><link rel="prefetch" href="/docs/assets/js/28.bf23bcd3.js"><link rel="prefetch" href="/docs/assets/js/29.2e25fc55.js"><link rel="prefetch" href="/docs/assets/js/3.eeb6970b.js"><link rel="prefetch" href="/docs/assets/js/30.589dd9fb.js"><link rel="prefetch" href="/docs/assets/js/31.85941da4.js"><link rel="prefetch" href="/docs/assets/js/32.94cbee4c.js"><link rel="prefetch" href="/docs/assets/js/33.171bbaaa.js"><link rel="prefetch" href="/docs/assets/js/35.835bfd50.js"><link rel="prefetch" href="/docs/assets/js/36.5c93bdf4.js"><link rel="prefetch" href="/docs/assets/js/37.92cf4e33.js"><link rel="prefetch" href="/docs/assets/js/38.a3e95851.js"><link rel="prefetch" href="/docs/assets/js/39.76fb2cc2.js"><link rel="prefetch" href="/docs/assets/js/4.65986612.js"><link rel="prefetch" href="/docs/assets/js/40.420380bb.js"><link rel="prefetch" href="/docs/assets/js/41.713fee93.js"><link rel="prefetch" href="/docs/assets/js/42.54fc0492.js"><link rel="prefetch" href="/docs/assets/js/43.0e663909.js"><link rel="prefetch" href="/docs/assets/js/44.7dfb3295.js"><link rel="prefetch" href="/docs/assets/js/45.8cecd56f.js"><link rel="prefetch" href="/docs/assets/js/46.787d6e84.js"><link rel="prefetch" href="/docs/assets/js/5.148bb49f.js"><link rel="prefetch" href="/docs/assets/js/6.2c6a4780.js"><link rel="prefetch" href="/docs/assets/js/7.95ad2806.js"><link rel="prefetch" href="/docs/assets/js/8.2ce2d0ed.js"><link rel="prefetch" href="/docs/assets/js/9.096f8743.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.d863bf22.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Limery</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link router-link-active">Api</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/docs/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/douxindong" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/docs/api/" class="nav-link router-link-active">Api</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/language/chinese.html" class="nav-link">Chinese</a></li><li class="dropdown-item"><!----> <a href="/docs/language/english.html" class="nav-link">English</a></li></ul></div></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/douxindong" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前言</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>月度超级粉丝榜</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/FansRank/" class="sidebar-link">接口文档</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>试用官V3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/tuijianguan-v3/tuijianguan-v3.html" class="sidebar-link">app端</a></li><li><a href="/docs/api/tuijianguan-v3/tuijianguan-v3-wx.html" class="sidebar-link">微信端</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>试用官</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/shiyongguan/shiyongguan.html" class="sidebar-link">App端接口领取页面信息</a></li><li><a href="/docs/api/shiyongguan/shiyongguan-wx.html" class="sidebar-link">微信端接口领取页面信息</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Android极光VIP接入SDK文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/third-push/" class="sidebar-link">通道集成指南</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>趣视频</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/AppDocument/Video.html" class="sidebar-link">阿里短视频demo接口</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>LifeVC 短视频</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/AppDocument/appconfig.html" class="sidebar-link">LifeVC app配置接口</a></li><li><a href="/docs/api/AppDocument/videologin.html" class="sidebar-link">LifeVC 短视频接口</a></li><li><a href="/docs/api/AppDocument/videostatistical.html" class="sidebar-link">记录日志统计接口</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>H5活动接口</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/api/AppDocument/AppScreenAd.html" class="sidebar-link">获取App启动广告接口</a></li><li><a href="/docs/api/DivideOneMillion/UserInfo.html" class="sidebar-link">瓜分红包-用户信息接口</a></li><li><a href="/docs/api/DivideOneMillion/Receive.html" class="sidebar-link">瓜分红包-提现接口</a></li><li><a href="/docs/api/GreenCart/GreenCardAPI.html" class="sidebar-link">小绿卡送福接口-主页</a></li><li><a href="/docs/api/GreenCart/ConfigGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-制卡页</a></li><li><a href="/docs/api/GreenCart/CreatetGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-提交卡</a></li><li><a href="/docs/api/GreenCart/ShareGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-分享页</a></li><li><a href="/docs/api/GreenCart/ReceiveGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-领取</a></li><li><a href="/docs/api/GreenCart/MyListGreenCardAPI.html" class="sidebar-link">小绿卡送福接口-我的列表</a></li><li><a href="/docs/api/Report.html" class="sidebar-link">活动交互统计接入说明</a></li><li><a href="/docs/api/huiyuanquanyi.html" class="sidebar-link">权益领券接口</a></li><li><a href="/docs/api/Recived.html" class="sidebar-link">权益领券接口2</a></li><li><a href="/docs/api/vipactInfo.html" class="sidebar-link">VIP会员回馈-活动</a></li><li><a href="/docs/api/vipactjoin.html" class="sidebar-link">VIP会员回馈-参与</a></li><li><a href="/docs/api/vipfriendinfo.html" class="sidebar-link">VIP会员回馈-好友验证</a></li><li><a href="/docs/api/vipfriendzhu.html" class="sidebar-link">VIP会员回馈-好友助力</a></li><li><a href="/docs/api/viprecivefudai.html" class="sidebar-link">VIP会员回馈-领取福袋</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jpush-sdk-厂商通道token回调说明"><a href="#jpush-sdk-厂商通道token回调说明" class="header-anchor">#</a> JPush SDK 厂商通道Token回调说明</h1> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>在国内 Android 生态中，推送通道都是由终端与云端之间的长链接来维持，严重依赖于应用进程的存活状态。如今一些手机厂家会在自家 rom 中做系统级别的推送通道，再由系统分发给各个 app，以此提高在自家 rom 上的推送送达率。各个rom均提供了不同的回调token的接口，JPush SDK提供了统一的回调接口。</p> <h2 id="功能描述"><a href="#功能描述" class="header-anchor">#</a> 功能描述</h2> <p>###回调方式：
请参考：https://docs.jiguang.cn/jpush/client/Android/android_api/#_66</p> <p>示例代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCommandResult</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">CmdMessage</span> cmdMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//注册失败+三方厂商注册回调</span>
    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string">&quot;[onCommandResult] &quot;</span><span class="token operator">+</span>cmdMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//cmd为10000时说明为厂商token回调</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>cmdMessage<span class="token operator">!=</span><span class="token keyword">null</span><span class="token operator">&amp;&amp;</span>cmdMessage<span class="token punctuation">.</span>cmd<span class="token operator">==</span><span class="token number">10000</span><span class="token operator">&amp;&amp;</span>cmdMessage<span class="token punctuation">.</span>extra<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> token <span class="token operator">=</span> cmdMessage<span class="token punctuation">.</span>extra<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> platform <span class="token operator">=</span> cmdMessage<span class="token punctuation">.</span>extra<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;platform&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> deviceName <span class="token operator">=</span> <span class="token string">&quot;unkown&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>platform<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
                deviceName <span class="token operator">=</span> <span class="token string">&quot;小米&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
                deviceName <span class="token operator">=</span> <span class="token string">&quot;华为&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
                deviceName <span class="token operator">=</span> <span class="token string">&quot;魅族&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
                deviceName <span class="token operator">=</span> <span class="token string">&quot;OPPO&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>
                deviceName <span class="token operator">=</span> <span class="token string">&quot;VIVO&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">6</span><span class="token operator">:</span>
                deviceName <span class="token operator">=</span> <span class="token string">&quot;ASUS&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>                
            <span class="token keyword">case</span> <span class="token number">8</span><span class="token operator">:</span>
                deviceName <span class="token operator">=</span> <span class="token string">&quot;FCM&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span><span class="token string">&quot;获取到 &quot;</span><span class="token operator">+</span>deviceName<span class="token operator">+</span><span class="token string">&quot; 的token:&quot;</span><span class="token operator">+</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>###回调时机
在sdk绑定token成功时回调,当sdk版本存在变更时会再次触发回调。</p> <p>存在回调时token为null的情况:
1.当集成存在问题会回调null。
2.因为厂商服务等问题获取不到厂商token时。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.b6d384de.js" defer></script><script src="/docs/assets/js/2.ffdb66c4.js" defer></script><script src="/docs/assets/js/34.020ddec5.js" defer></script>
  </body>
</html>
